<div class="login-view">
    <div class="div">
        <div class="container">
            <div class="logo text-center" routerLink="/auth/login">
                <img src="/assets/brand/logo-white.png">
            </div>
            
            <div class="card join-card mt-4" *ngIf="step === -1">
                <div class="card-body py-5">
                    <div class="form-group mb-3">
                        <div class="underline-text-input-group">
                            <input id="mail" class="underline-text-input-field"
                                type="input"
                                placeholder="이메일"
                                autocomplete="off"
                                [(ngModel)]="data.mail"
                                (keyup.enter)="check(data.mail)"
                                [disabled]="status !== 0">
                            <label class="underline-text-input-label">이메일</label>
                        </div>
                        <div class="mt-2 text-muted" *ngIf="status === 0">* 기관 이메일을 사용하지 않는 경우 기능 사용에 제약이 있을 수 있습니다.</div>

                        <div class="mt-4 text-center" *ngIf="status === 0">
                            <button class="btn btn-blue btn-block" (click)="check(data.mail)">가입확인</button>
                        </div>
                        
                        <div class="mt-2 text-center" *ngIf="status === 0">
                            <span class="text-muted mr-2">이미 회원이신가요?</span>
                            <a class="text-muted" routerLink="/auth/login">로그인 하러가기</a>
                        </div>

                        <div class="form-group mb-3" *ngIf="status !== 0">
                            <div class="underline-text-input-group">
                                <input id="verify-code" class="underline-text-input-field"
                                    type="input"
                                    placeholder="이메일"
                                    autocomplete="off"
                                    [(ngModel)]="data.code"
                                    (keyup.enter)="verify(data.mail, data.code)">
                                <label class="underline-text-input-label">인증코드</label>
                            </div>

                            <div class="text-center mt-4" *ngIf="status === 1">
                                <button class="btn btn-blue btn-block" (click)="verify(data.mail, data.code)">이메일 인증</button>
                                <div class="addition-info mt-2 text-center">
                                    <a (click)="resend(data.mail)">인증 메일 다시 보내기</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card join-card mt-4" *ngIf="step >= 0">
                <div class="card-body py-5">
                    <div class="form-group" *ngIf="step === 0">
                        <div class="login-heading">
                            <div class="login-form-icon">
                                <i class="fa-solid fa-user"></i>
                            </div>
                            <div class="text-muted">
                                <span>회원가입을 위해 연락처 정보를 입력해주세요</span>
                            </div>
                        </div>

                        <div class="underline-text-input-group mb-3">
                            <input id="mail" class="underline-text-input-field"
                                type="email"
                                autocomplete="off"
                                placeholder="이메일"
                                disabled=""
                                [(ngModel)]="userdata.mail">
                            <label class="underline-text-input-label">이메일</label>
                        </div>

                        <div class="underline-text-onlyform-input-group mb-3">
                            <input id="name" class="underline-text-input-field"
                                type="text"
                                placeholder="이름을 입력하세요."
                                autocomplete="off"
                                [(ngModel)]="userdata.name">
                            <label class="underline-text-input-label">이름*</label>
                            <div class="mt-2 text-muted">* 실명으로 가입하지 않을 경우 데이터 제공신청 등 일부 서비스에 대해 불이익이 있을 수 있습니다.</div>
                        </div>
                            
                        <div class="underline-text-onlyform-input-group mb-3">
                            <input id="contactnumber1" class="underline-text-input-field"
                                type="tel"
                                placeholder="연락처를 입력하세요."
                                autocomplete="off"
                                [(ngModel)]="userdata.tel">
                            <label class="underline-text-input-label">연락처*</label>
                        </div>

                        <div class="underline-text-onlyform-input-group mb-3">
                            <input id="contactnumber2" class="underline-text-input-field"
                                type="tel"
                                placeholder="휴대폰 번호를 입력하세요."
                                autocomplete="off"
                                [(ngModel)]="userdata.mobile">
                            <label class="underline-text-input-label">휴대전화*</label>
                        </div>

                        <div class="underline-text-onlyform-input-group mb-3">
                            <input id="fax" class="underline-text-input-field"
                                type="tel"
                                placeholder="fax 번호를 입력하세요."
                                autocomplete="off"
                                [(ngModel)]="userdata.fax">
                            <label class="underline-text-input-label">FAX</label>
                        </div>

                        <div class="text-center">
                            <button class="btn btn-blue btn-block" (click)="step1()">
                                <span>다음으로</span>
                                <i class="fa-solid fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-group" *ngIf="step === 1">
                        <div class="login-heading">
                            <div class="login-form-icon">
                                <i class="fa-solid fa-building"></i>
                            </div>
                            <div class="text-muted">
                                <span>서비스 이용을 위해 소속된 기관 정보를 입력해주세요</span>
                            </div>
                        </div>

                        <div class="underline-text-onlyform-input-group mb-3">
                            <input id="mail" class="underline-text-input-field"
                                type="text"
                                autocomplete="off"
                                placeholder="기관명"
                                [(ngModel)]="userdata.institute">
                            <label class="underline-text-input-label">기관명</label>
                        </div>

                        <div class="underline-text-onlyform-input-group mb-3">
                            <input id="department" class="underline-text-input-field"
                                type="text"
                                placeholder="부서를 입력하세요."
                                autocomplete="off"
                                [(ngModel)]="userdata.department">
                            <label class="underline-text-input-label">부서</label>
                        </div>
                            
                        <div class="underline-text-onlyform-input-group mb-3">
                            <input id="position" class="underline-text-input-field"
                                type="text"
                                placeholder="직책을 입력하세요."
                                autocomplete="off"
                                [(ngModel)]="userdata.title">
                            <label class="underline-text-input-label">직책</label>
                        </div>

                        <div class="text-center">
                            <button class="btn btn-blue btn-block" (click)="step2()">
                                <span>다음으로</span>
                                <i class="fa-solid fa-arrow-right ml-2"></i>
                            </button>
                        </div>
                    </div>

                    <div class="form-group" *ngIf="step === 2">
                        <div class="login-heading">
                            <div class="login-form-icon">
                                <i class="fa-solid fa-key"></i>
                            </div>
                            <div class="text-muted">
                                <span>비밀번호를 설정해주세요</span>
                            </div>
                        </div>

                        <div class="underline-text-onlyform-input-group mb-3">
                            <input id="password" class="underline-text-input-field"
                                type="password"
                                placeholder="8-16자 영문 대소문자,숫자,특수문자를 사용하세요."
                                autocomplete="off"
                                [(ngModel)]="userdata.password">
                            <label class="underline-text-input-label">비밀번호*</label>
                        </div>

                        <div class="underline-text-onlyform-input-group mb-3">
                            <input id="pw_rp" class="underline-text-input-field"
                                type="password"
                                placeholder="비밀번호를 다시 입력하세요."
                                autocomplete="off"
                                (keyup.enter)="join()"
                                [(ngModel)]="userdata.password_repeat">
                            <label class="underline-text-input-label">비밀번호 확인*</label>
                        </div>

                        <div class="text-center">
                            <button class="btn btn-blue btn-block" (click)="join()">설정하기</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

